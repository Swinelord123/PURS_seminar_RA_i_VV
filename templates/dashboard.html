<!DOCTYPE html>
<html>
<head>
    <title>Kontrolni panel</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>

<div class="page">

    <!-- TOP BAR -->
    <div class="top-bar">
        <h1>Kontrolni panel</h1>
        <a href="/logout" class="logout">Logout</a>
    </div>

    <!-- SENSOR + CONTROL -->
    <div class="top-row">
        <div class="card small">
            <h3>O훾itanja senzora</h3>
            <iframe
                src="/sensor-fragment"
                style="border:none; width:100%; height:110px; overflow:hidden;"
                scrolling="no">
            </iframe>
        </div>

        <div class="card small">
            <h3>Regulacija sustava</h3>

            <form method="POST" action="/auto-control">
                <button type="submit">Automatska kontrola</button>
            </form>

            <hr>

            <form method="POST" action="/manual-control">
                <label>
                    <input type="checkbox" name="fan_manual" value="1"
                    {% if settings.fan_manual == 1 %}checked{% endif %}>
                    Ventilator
                </label><br>

                <label>
                    <input type="checkbox" name="heater_manual" value="1"
                    {% if settings.heater_manual == 1 %}checked{% endif %}>
                    Grijalica
                </label><br><br>

                <button type="submit">Manualna kontrola</button>
            </form>
        </div>
    </div>

    <div class="card center">
        <h3>Granice alarma</h3>

        <form method="POST" action="/update-settings" class="threshold-form">
            <div class="thresholds-box">
                <label>Temperatura NISKA (째C)</label>
                <input type="number" step="0.1" name="temp_low" value="{{ settings.temp_low }}">

                <label>Temperatura VISOKA (째C)</label>
                <input type="number" step="0.1" name="temp_high" value="{{ settings.temp_high }}">

                <label>Vlaga NISKA (%)</label>
                <input type="number" step="0.1" name="hum_low" value="{{ settings.hum_low }}">

                <label>Vlaga VISOKA (%)</label>
                <input type="number" step="0.1" name="hum_high" value="{{ settings.hum_high }}">

                <button type="submit">Save thresholds</button>
            </div>
        </form>
    </div>

    <!-- SENSOR HISTORY -->
    <div class="card center">
        <h3>Povijest o훾itanja senzora</h3>
        <iframe src="/sensor-history-fragment"></iframe>
    </div>

    <!-- ALARM HISTORY -->
    <div class="card center">
        <h3>Povijest okidanja alarma</h3>
        <iframe
        src="/alarm-history-fragment"
        style="border:none; width:100%; height:320px;"
        scrolling="no">
</iframe>
    </div>
</div>

</body>
</html>